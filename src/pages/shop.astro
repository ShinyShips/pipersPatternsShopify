---
import Products from '../components/Products.astro';
import Layout from '../layouts/Layout.astro';
import { getProducts } from '../utils/shopify';
import { Image } from 'astro:assets';
import banner from '../assets/banner.png';

const headers = Astro.request.headers;
const ip = headers.get("x-vercel-forwarded-for") || Astro.clientAddress;
const products = await getProducts({ buyerIP: ip });

---

<Layout title="Piper's Patterns Shop">
    <Products products={products} />
</Layout>